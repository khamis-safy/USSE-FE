<div class="write-message-containter  w-100 h-100 p-5 mt-5">

  <div class="d-flex gap-5 flex-column">
    <form [formGroup]="form" class="d-flex gap-5 flex-column">
      <us-select
        [data]="templates"
        formControlName="templatesData"
        [multiSelect]="false"
        (onSelect)="onSelect($event)"
        [loadingText]="templateLoadingText"
        [label]="'Templates' | translate"
        [placeholder]="'Select Templates' | translate"
        [isDisabled]="false"
        [optional]="true"
        [enableSearch]="true"
        [searchbarOnToggler]="true"
        [searchNoResultText]="'there is no result' | translate"
        [maxListItemsWithoutSearch]="5"
      ></us-select>

      <us-input
        [isDisabled]="false"
        placeholder="{{ 'Enter Your Message...' | translate }}"
        [optional]="true"
        type="text"
        [error]="false"
        [fullWidth]="true"
        formControlName="message"
        [label]="'Message' | translate"
        [isTextArea]="true"
        [isEmoji]="true"
      ></us-input>
    </form>
    <div class="form-group d-flex gap-lg-4 flex-column  flex-lg-row flex-nowrap files-container">
      <label for="devicesData" class="w-25 d-none d-lg-block text-nowrap d-flex" style="min-width:25%"
        ><span class="txt txt-sm text-black text-wrap">{{ 'Attachments' | translate }}</span>
      </label>

      <us-upload class="w-100"
        (onFileChange)="onFileChange($event)"
        (onFileDelete)="onFileDelete($event)"
        [isLoading]="loading"
        [(ngModel)]="fileData"
        [multiple]="true"
      ></us-upload>
    </div>
  </div>
  <div class="d-flex justify-content-end align-items-center buttons" style="width: 95%; ">
    <button class="rest-style" matStepperPrevious>
      <us-button
        class="m-2"
        label="{{ 'BACK' | translate }}"
        [fill]="false"
        [size]="'md'"
        [loading]="false"
        [disabled]="false"
        [appearance]="'primary'"
      >
      </us-button>
    </button>
    <button class="rest-style" matStepperNext [disabled]="!form.valid && !files">
      <us-button
        class="m-2"
        label="{{ 'NEXT' | translate }}"
        [fill]="true"
        [size]="'md'"
        [loading]="false"
        [disabled]="!form.valid && !files"
        [appearance]="'primary'"
        (clicked)="filesAndMessageToParent()"
      >
      </us-button>
    </button>
  </div>
</div>