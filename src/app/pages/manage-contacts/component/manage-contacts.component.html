<section class="p-3">
  <div class="d-flex justify-content-between mb-4 align-items-center">
    <div class="d-flex justify-content-center ">
      <img src="assets/icons/manage-contacts.svg" alt="" class="px-2">
      <span class="txt-lg main-heading">{{ 'MANAGE_CONTACTS' | translate }}</span>
    </div>
    <div class="buttons_">
      <us-button
        *ngIf="isChecked && !isCanceled && canEdit"
        class="m-2"
        [label]="'REMOVE_LISTS' | translate"
        img="assets/icons/delete.svg"
        [iconClass]="'material-symbols-outlined'"
        [fill]="true"
        [size]="'md'"
        [loading]="false"
        [disabled]="false"
        [appearance]="'danger'"
        (clicked)="removeLists()"
      ></us-button>

      <us-button
        *ngIf="(isChecked || isDelete) && canEdit"
        class="m-2"
        [label]="'DELETE' | translate"
        img="assets/icons/delete.svg"
        [iconClass]="'material-symbols-outlined'"
        [fill]="true"
        [size]="'md'"
        [loading]="false"
        [disabled]="false"
        [appearance]="'danger'"
        (clicked)="selectedTab=='contacts'?openDeleteConModal():selectedTab=='lists'?openDeleteModal():''"
      ></us-button>

      <us-button
        *ngIf="isChecked && !isCanceled && canEdit"
        class="m-2"
        [label]="'ADD_TO_LISTS' | translate"
        [matIcon]="'add'"
        [fill]="true"
        [size]="'md'"
        [loading]="false"
        [disabled]="false"
        [appearance]="'primary'"
        (clicked)="openContactLists()"
      ></us-button>

      <us-button
        *ngIf="(selectedTab=='contacts' || selectedTab=='lists') && canEdit"
        class="m-2"
        [label]="selectedTab=='contacts'?('ADD_CONTACT'| translate) :('ADD_LIST' | translate)"
        [matIcon]="'add'"
        [fill]="true"
        [size]="'md'"
        [loading]="false"
        [disabled]="false"
        [appearance]="'primary'"
        (clicked)="selectedTab=='contacts'?openAddContactModal():selectedTab=='lists'?openAddListModal():openunsubscribeModal()"
      ></us-button>

      <us-button
        *ngIf="selectedTab=='contacts'"
        class="m-2"
        [label]="'IMPORT_FILE' | translate"
        img="assets/icons/import.svg"
        [fill]="true"
        [size]="'md'"
        [loading]="false"
        [disabled]="false"
        [appearance]="'primary'"
        (clicked)="openImportModal()"
      ></us-button>

      <us-button
        *ngIf="selectedTab=='contacts'"
        class="m-2"
        [label]="isChecked?('EXPORT_SELECTED' | translate):'EXPORT_ALL' | translate"
        img="assets/icons/export.svg"
        [fill]="true"
        [size]="'md'"
        [loading]="false"
        [disabled]="false"
        [appearance]="'primary'"
        (clicked)="isChecked ? exportSelectedContacts() : exportAllContacts()"
      ></us-button>
    </div>
  </div>

  <mat-tab-group mat-stretch-tabs="false" mat-align-tabs="start" color="transparent"  [(selectedIndex)]="selectedTabIndex"   (selectedTabChange)="changeModal($event)">

    <mat-tab *ngFor="let item of tabsArr" [label]="tab">

      <ng-template mat-tab-label class="txt-md">
        <img [src]="item.image" alt="" class="px-2">
        {{ item.title | translate }}
      </ng-template>

      <ng-container *ngIf="item.tab!='lists' else lists">

        <app-contacts *ngIf="selectedTab == item.tab" [canEdit]="canEdit" [isCanceled]="item.canceled" (isChecked)="onChecked($event)"></app-contacts>
      </ng-container>

      <ng-template #lists>
        <app-lists *ngIf="selectedTab == item.tab" [canEdit]="canEdit" (isDelete)="onDeleteChange($event)"></app-lists>
      </ng-template>

    </mat-tab>

    <!-- <mat-tab>
      <ng-template mat-tab-label class="txt-md">
        <img src="assets/icons/contacts.svg" alt="" class="px-2">
        {{ 'CONTACTS' | translate }}
      </ng-template>
      <app-contacts [canEdit]="canEdit" [isCanceled]="false" (isChecked)="onChecked($event)"></app-contacts>
    </mat-tab>

    <mat-tab>
      <ng-template mat-tab-label>
        <img src="assets/icons/lists.svg" alt="" class="px-2">
        {{ 'LISTS' | translate }}
      </ng-template>
      <app-lists [canEdit]="canEdit" (isDelete)="onDeleteChange($event)"></app-lists>
    </mat-tab>

    <mat-tab>
      <ng-template mat-tab-label >
        <img src="assets/icons/unsubscribe.svg" alt="" class="px-2">
        {{ 'CANCELED_CONTACTS' | translate }}
      </ng-template>
      <app-contacts [canEdit]="canEdit" [isCanceled]="true" (isChecked)="onChecked($event)"></app-contacts>
    </mat-tab> -->
  </mat-tab-group>
</section>
